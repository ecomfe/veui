@import "../lib.less";
@import "./button-group.less";
@import "../grouped-button.less";

.@{veui-prefix}-check-button-group {
  // --dls-checkbox-button-min-width 默认不定义
  position: relative;

  &-items {
    margin-top: -@dls-checkbox-group-line-spacing;
    border-radius: inherit;
    pointer-events: none;
  }

  .@{veui-prefix}-button {
    .veui-grouped-button();
    margin-top: @dls-checkbox-group-line-spacing;
    pointer-events: auto;
  }

  .@{veui-prefix}-button &-checkmark {
    .absolute(
      @dls-checkbox-icon-spacing-strong,
      @dls-checkbox-icon-spacing-strong,
      _,
      _
    );
    color: @dls-checkbox-icon-color-strong;
    border: @dls-checkbox-icon-size-strong / 2 solid transparent;
    .border-color(currentColor, currentColor, _, _);
    .veui-transition(color);

    & + .@{veui-prefix}-icon:last-child {
      margin-right: 0;
    }
  }

  .@{veui-prefix}-button-selected:active &-checkmark,
  .@{veui-prefix}-button-selected &-checkmark {
    color: @dls-checkbox-icon-color-strong-checked;
  }

  .@{veui-prefix}-disabled &-checkmark {
    color: @dls-checkbox-icon-color-strong-disabled;
  }

  .@{veui-prefix}-button-selected.@{veui-prefix}-disabled &-checkmark {
    color: @dls-checkbox-icon-color-strong-checked-disabled;
  }

  &[ui~="simple"] {
    &.@{veui-prefix}-button-group .@{veui-prefix}-button {
      margin-left: @dls-checkbox-group-spacing-simple;
      border-radius: 4px;

      &.@{veui-prefix}-disabled:not(.@{veui-prefix}-button-selected) {
        background-color: transparent;
      }

      &:not([data-focus-visible-added]) {
        border-color: transparent;
      }
    }
  }

  &[ui~="simple"]
    .@{veui-prefix}-disabled:not(.@{veui-prefix}-button-selected)
    &-checkmark,
  &[ui~="simple"]
    .@{veui-prefix}-button:not(.@{veui-prefix}-button-selected):not(:hover):not(
      :active
    ):not([data-focus-visible-added])
    &-checkmark {
    border-color: transparent;
  }

  &[ui~="simple"] &-items {
    margin-left: -@dls-checkbox-group-spacing-simple;
  }

  &[ui~="stable"] {
    &,
    &[ui~="m"] {
      .@{veui-prefix}-button {
        min-width: var(
          --dls-checkbox-button-min-width,
          @dls-button-min-width-stable-m
        );
      }
    }
    &[ui~="s"] .@{veui-prefix}-button {
      min-width: var(
        --dls-checkbox-button-min-width,
        @dls-button-min-width-stable-s
      );
    }
  }

  &[ui~="theme:d22"]:not([ui~="simple"]) &-checkmark {
    @padding: @dls-padding-unit * 0.5;

    top: dls-sum(@padding, -1px, @dls-checkbox-icon-spacing-strong);
    right: dls-sum(@padding, -1px, @dls-checkbox-icon-spacing-strong);
  }

  &[ui~="theme:d22"]:not([ui~="simple"]) {
    .veui-d22-button-group();
  }
}
