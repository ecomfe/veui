@import "../lib.less";

.@{veui-prefix}-tag {
  position: relative;
  display: inline-flex;
  align-items: center;
  vertical-align: middle;
  .make-metrics(m);
  .padding(0, @dls-tag-padding);
  white-space: nowrap;
  outline: none;
  line-height: 2;
  .veui-transition(color, border-color, background-color, box-shadow, opacity);

  .make-metrics(@size) {
    @height: ~"dls-tag-height-@{size}";
    @radius: ~"dls-tag-border-radius-@{size}";
    @font-size: ~"dls-tag-font-size-@{size}";

    height: @@height;
    border-radius: @@radius;
    font-size: @@font-size;
  }

  &[ui~="s"] {
    .make-metrics(s);
  }

  &[ui~="borderless"]:not(.focus-visible) {
    border-color: transparent;
  }

  &-close {
    margin-left: @dls-tag-content-spacing;
    font-size: inherit;

    .@{veui-prefix}-icon {
      .dls-icon-size(@dls-tag-icon-size-aux);
    }
  }

  &.focus-visible {
    .dls-focus-ring(@dls-border-color-focus, @dls-shadow-focus);
  }

  &-default {
    border: 1px solid fade(@dls-tag-font-color, percentage(@dls-tag-border-opacity));
    color: @dls-tag-font-color;
    background-color: @dls-tag-background-color;
  }

  &-selectable {
    cursor: pointer;
  }

  &-default&-selectable:not(.@{veui-prefix}-disabled) {
    &:hover {
      background-color: @dls-background-color-neutral-hover;
    }

    &:active {
      background-color: @dls-background-color-neutral-active;
    }
  }

  &-default.@{veui-prefix}-disabled {
    border-color: @dls-border-color-neutral-disabled;
    background-color: @dls-background-color-neutral-disabled;
    color: @dls-foreground-color-neutral-disabled;
  }

  .@{veui-prefix}-disabled .@{veui-prefix}-tag-close {
    cursor: not-allowed;
  }

  &.@{veui-prefix}-tag-selected {
    color: @dls-tag-font-color-selected;
    border-color: transparent;
    background-color: @dls-tag-background-color-selected;

    &.focus-visible {
      .dls-focus-ring(
        @dls-border-color-focus, @dls-shadow-focus
      );
    }

    &.@{veui-prefix}-disabled {
      border-color: fade(@dls-tag-background-color, @dls-tag-border-opacity-disabled * 100);
      background-color: fade(@dls-tag-background-color, @dls-tag-border-opacity-disabled * 100);
    }
  }

  .make-state-color (@state) {
    &-@{state} {
      @color-name: ~"dls-tag-font-color-@{state}";
      @bg-color-name: ~"dls-tag-background-color-@{state}";
      @bd-color: fade(@@bg-color-name, percentage(@dls-tag-border-opacity));
      @bg-color: fade(@@bg-color-name, percentage(@dls-tag-background-opacity));
      @disabled-color: fade(@dls-tag-font-color, percentage(@dls-tag-font-opacity-disabled));
      @disabled-bd-color:fade(@@bg-color-name, percentage(@dls-tag-border-opacity-disabled));

      @selected-bg-color-name: fade(@@bg-color-name, percentage(@dls-tag-background-opacity-selected));
      @selected-disabled-bg-color: fade(@@bg-color-name, percentage(@dls-tag-background-opacity-selected-disabled));

      color: @@color-name;
      border-color: @bd-color;
      background-color: @bg-color;

      &.@{veui-prefix}-disabled {
        color: @disabled-color;
        border-color: @disabled-bd-color;
      }

      &.@{veui-prefix}-tag-selected,
      &[ui~="reverse"] {
        color: @dls-tag-font-color-selected;
        border-color: fade(@dls-tag-background-color-selected, @dls-tag-border-opacity * 100);
        background-color: fade(@dls-tag-background-color-selected, @dls-tag-background-opacity-selected * 100);

        &.focus-visible {
          .dls-focus-ring(
            @dls-border-color-focus, @dls-shadow-focus
          );
        }

        &.@{veui-prefix}-disabled {
          border-color: fade(@dls-tag-background-color-selected, @dls-tag-border-opacity-disabled * 100);
          background-color: fade(@dls-tag-background-color-selected, @dls-tag-background-opacity-selected-disabled * 100);
        }
      }

      &[ui~="reverse"] {
        color: @dls-tag-font-color-reversed;
      }

      &.focus-visible,
      &.@{veui-prefix}-tag.focus-visible {
        .dls-focus-ring(@dls-border-color-focus, @dls-shadow-focus);
      }
    }
  }

  .make-state-color(info);
  .make-state-color(success);
  .make-state-color(warning);
  .make-state-color(error);
}
