@import "../lib.less";

.veui-switch {
  .metrics(@size) {
    @width: ~"dls-switch-width-@{size}";
    @height: ~"dls-switch-height-@{size}";
    @thumb-size: ~"dls-switch-thumb-size-@{size}";
    @padding: ~"dls-switch-padding-@{size}";

    .veui-switch {
      &-switcher {
        .size(@@width, @@height);
        padding: @@padding;
        border-radius: @@height / 2;
      }

      &-button {
        .size(@@thumb-size);

        .veui-icon {
          .dls-icon-size(dls-sum(@@thumb-size, -2px));
        }
      }
    }

    &.veui-switch-loading .veui-switch-button,
    &.veui-switch-on:not(.veui-switch-loading)
      > .veui-switch-switcher
      > .veui-switch-button {
      transform: translateX(
        dls-sum(@@width, @@thumb-size * -1, @@padding * -2)
      );
    }

    &.veui-switch-on.veui-switch-loading .veui-switch-button {
      transform: translateX(0);
    }
  }

  display: inline-flex;
  align-items: center;
  cursor: pointer;
  outline: none;
  font-size: @dls-font-size-m;

  .metrics(m);

  input {
    position: absolute;
    opacity: 0;
  }

  &-switcher,
  &-label {
    display: inline-flex;
    align-items: center;
  }

  &-label {
    margin-left: @dls-padding-unit * 2;
  }

  &-switcher {
    font-size: @dls-switch-font-size;
    background-color: @dls-switch-track-color-off;
    user-select: none;
    .veui-transition(background-color, box-shadow);
  }

  &:hover &-switcher {
    background-color: @dls-switch-track-color-off-hover;
  }

  &:active &-switcher {
    background-color: @dls-switch-track-color-off-active;
  }

  .focus-visible + &-switcher {
    box-shadow: @dls-switch-shadow-off-focus;
  }

  &-on .focus-visible + &-switcher {
    box-shadow: @dls-switch-shadow-on-focus;
  }

  &-button {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: @dls-switch-thumb-color-off;
    border-radius: 50%;
    .veui-transition(transform);

    .veui-icon {
      position: absolute;
      color: @dls-switch-track-color-off;
    }
  }

  :checked + &-switcher {
    background-color: @dls-switch-track-color-on;

    .veui-icon {
      color: @dls-switch-track-color-on;
    }
  }

  &:hover :checked + &-switcher {
    background-color: @dls-switch-track-color-on-hover;
  }

  &:active :checked + &-switcher {
    background-color: @dls-switch-track-color-on-active;
  }

  &.veui-readonly {
    cursor: default;
  }

  &-loading {
    pointer-events: none;
  }

  &-loading &-switcher {
    .veui-icon {
      color: @dls-switch-track-color-off;
    }
  }

  &-on&-loading &-switcher {
    .veui-icon {
      color: @dls-switch-track-color-on;
    }
  }

  &.veui-disabled {
    cursor: not-allowed;
  }

  &-loading &-switcher,
  &.veui-readonly &-switcher,
  &.veui-disabled &-switcher {
    background-color: @dls-switch-track-color-off-disabled;
  }

  &-on&-loading &-switcher,
  &-on.veui-readonly &-switcher,
  &-on.veui-disabled &-switcher {
    background-color: @dls-switch-track-color-on-disabled;
  }

  &[ui~="xs"] {
    font-size: @dls-font-size-s;
    .metrics(xs);
  }

  &[ui~="s"] {
    font-size: @dls-font-size-s;
    .metrics(s);
  }
}
