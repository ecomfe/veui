@import "../lib.less";

.@{veui-prefix}-popover-box {
  @arrow-size: @dls-tooltip-arrow-width;
  @arrow-indent: @dls-popover-arrow-spacing;

  .@{veui-prefix}-tooltip {
    max-width: @dls-popover-max-width;
    line-height: @dls-popover-line-height;
    padding: 0;
    border: 0.1px solid transparent;

    .@{veui-prefix}-tooltip-content {
      overflow: visible;
      margin: @dls-popover-padding-y @dls-popover-padding-x;
    }

    @arrow-offset: @arrow-indent - @arrow-size / 2;

    .make-align(@side) {
      &-aim-center {
        margin-@{side}: dls-sum(-@arrow-indent, -@arrow-size / 2);
      }
    }
    .make-align(top) {
      &-arrow {
        top: @arrow-offset;
      }
    }
    .make-align(right) {
      &-arrow {
        right: @arrow-offset;
        left: auto;
      }
    }
    .make-align(bottom) {
      &-arrow {
        top: auto;
        bottom: @arrow-offset;
      }
    }
    .make-align(left) {
      &-arrow {
        left: @arrow-offset;
      }
    }

    [x-placement*="top"]&,
    [x-placement*="bottom"]& {
      &-arrow {
        left: calc(50% - @arrow-size);
      }
    }

    [x-placement*="right"]&,
    [x-placement*="left"]& {
      &-arrow {
        top: calc(50% - @arrow-size);
      }
    }

    [x-placement="right-start"]&,
    [x-placement="left-start"]& {
      .make-align(top);
    }

    [x-placement="top-end"]&,
    [x-placement="bottom-end"]& {
      .make-align(right);
    }

    [x-placement="right-end"]&,
    [x-placement="left-end"]& {
      .make-align(bottom);
    }

    [x-placement="top-start"]&,
    [x-placement="bottom-start"]& {
      .make-align(left);
    }

    .@{veui-prefix}-popover-head {
      font-weight: @dls-popover-title-font-weight;
    }

    .@{veui-prefix}-popover-content {
      overflow: auto;
    }

    .@{veui-prefix}-popover-foot {
      display: flex;
      justify-content: flex-end;

      .@{veui-prefix}-button + .@{veui-prefix}-button {
        margin-left: @dls-dialog-action-content-spacing;
      }
    }

    &[ui~="s"] {
      border-radius: @dls-popover-border-radius-s;
      font-size: @dls-popover-font-size-s;

      .@{veui-prefix}-popover {
        &-head {
          margin-bottom: @dls-popover-title-spacing-s;
          font-size: @dls-popover-title-font-size-s;
        }

        &-foot {
          margin-top: @dls-popover-action-spacing-s;
        }
      }
    }

    &[ui~="m"] {
      border-radius: @dls-popover-border-radius-m;
      font-size: @dls-popover-font-size-m;

      .@{veui-prefix}-popover {
        &-head {
          margin-bottom: @dls-popover-title-spacing-m;
          font-size: @dls-popover-title-font-size-m;
        }

        &-foot {
          margin-top: @dls-popover-action-spacing-m;
        }
      }
    }
  }
}
