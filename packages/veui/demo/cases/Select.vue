<template>
<article>
  <h1>
    <code>&lt;veui-select&gt;</code>
  </h1>
  <section>
    <h2>4 уДЇтцДт░Ј№╝џ</h2>
    <veui-form>
      <veui-field v-for="ui in sizes" :key="ui" :ui="ui" :label="ui">
        <veui-select
          v-model="defaultValue1"
          :ui="ui"
          v-bind="attrs"
          placeholder="тЁежЃе"
          clearable
          :filter="filter"
        />
      </veui-field>
    </veui-form>
  </section>
  <section>
    <h2>ж╗ўУ«цТаит╝Ј№╝џ</h2>
    <veui-select
      v-model="defaultValue"
      v-bind="attrs"
      placeholder="тЁежЃе"
      clearable
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тцџжђЅТаит╝Ј№╝џxs (т«џтѕХ max)</h2>
    <veui-select
      v-model="defaultMultiValue"
      ui="xs"
      v-bind="attrs"
      placeholder="тЁежЃе"
      :max="3"
      clearable
      multiple
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тцџжђЅТаит╝Ј№╝џs (УЄфт«џС╣Ѕ tag slot, тЁежђЅ)</h2>
    <veui-select
      v-model="defaultMultiValue"
      ui="s"
      v-bind="attrs"
      placeholder="тЁежЃе"
      show-select-all
      clearable
      multiple
      readonly
    >
      <template #tag="{ label }">
        <i>{{ label }}</i>
      </template>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тцџжђЅТаит╝Ј</h2>
    <veui-select
      v-model="defaultMultiValue"
      v-bind="attrs"
      placeholder="тЁежЃе"
      clearable
      multiple
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тцџжђЅТаит╝Ј№╝џm (ж╗ўУ«ц)</h2>
    <veui-select
      v-model="defaultMultiValue"
      v-bind="attrs"
      placeholder="тЁежЃе"
      clearable
      multiple
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тцџжђЅТаит╝Ј№╝џl</h2>
    <veui-select
      v-model="defaultMultiValue"
      ui="l"
      v-bind="attrs"
      placeholder="тЁежЃе"
      clearable
      multiple
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тцџжђЅТаит╝Ј№╝џТюЅжЎљтѕХ</h2>
    <veui-select
      v-model="defaultMultiValue"
      placeholder="тЁежЃе"
      v-bind="attrs"
      :max="4"
      clearable
      multiple
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тцџжђЅТаит╝Ј№╝џудЂуће</h2>
    <veui-select
      v-model="defaultMultiValue"
      v-bind="attrs"
      placeholder="тЁежЃе"
      clearable
      multiple
      disabled
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тЈ»Тљюу┤бSelect№╝џ</h2>
    <veui-select
      v-model="defaultValue2"
      v-bind="attrs"
      ui="checkmark"
      searchable
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тЈ»Тљюу┤бSelect№╝џ(УЄфт«џС╣Ѕ label slot)</h2>
    <veui-select
      v-model="defaultValue2"
      v-bind="attrs"
      ui="checkmark"
      searchable
    >
      <template #label="{ label }">
        {{ label }}
        <veui-icon class="icon" name="flag"/>
      </template>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тЈ»Тљюу┤бSelect№╝џ(УЄфт«џС╣Ѕ selected slot)</h2>
    <veui-select
      v-model="defaultValue2"
      v-bind="attrs"
      ui="checkmark"
      searchable
    >
      <template #selected="{ label }">
        {{ label }}
        <veui-icon class="icon" name="flag"/>
      </template>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тЈ»Тљюу┤бтцџжђЅSelect№╝џ(тЁежђЅ)</h2>
    <veui-select
      v-model="defaultSearchMultiValue"
      v-bind="attrs"
      searchable
      multiple
      show-select-all
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тЈ»Тљюу┤бтцџжђЅSelect№╝џ(УЄфт«џС╣Ѕ label slot)</h2>
    <veui-select
      v-model="defaultSearchMultiValue"
      v-bind="attrs"
      searchable
      multiple
    >
      <template
        #label="{ selected }"
      >{{ selected[0].label }}уГЅ{{ selected.length }}СИф{{ ' ' }}</template>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тцџжђЅSelect№╝џ(УЄфт«џС╣Ѕ selected slot)</h2>
    <veui-select
      v-model="defaultSearchMultiValue"
      v-bind="attrs"
      multiple
      searchable
    >
      <template #selected="{ selected }">
        {{ selected[0].label
        }}{{ selected.length > 1 ? `уГЅ${selected.length}СИф` : '' }}
      </template>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тЈ»Тљюу┤бтцџжђЅSelect№╝џТюЅжЎљтѕХ</h2>
    <veui-select
      v-model="defaultSearchMultiValue"
      v-bind="attrs"
      :max="4"
      searchable
      multiple
      show-select-all
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тЈфУ»╗Таит╝Ј№╝џ</h2>
    <veui-select v-model="defaultValue1" v-bind="attrs" readonly/>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>удЂућеТаит╝Ј№╝џ</h2>
    <veui-select v-model="defaultValue1" v-bind="attrs" disabled/>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>ТіЦжћЎТаит╝Ј№╝џ</h2>
    <veui-select v-model="defaultValue1" v-bind="attrs" invalid/>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>Slot[name=option-label] Таит╝Ј№╝џ</h2>
    <veui-select v-model="defaultValue3" v-bind="attrs" ui="alt">
      <template #option-label="props">
        <span class="option-custom-label">{{ props.label }}</span>
      </template>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>Slot Таит╝Ј 2№╝џ</h2>
    <veui-select v-model="defaultValue4" v-bind="attrs">
      <template #option="props">
        <span class="option-label-text">{{ props.label }}</span>
        <veui-icon class="icon" name="flag"/>
      </template>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>Slot Таит╝Ј 3№╝џ</h2>
    <veui-select v-model="defaultValue1" v-bind="attrs">
      <template #option="props">
        <veui-radio :checked="props.selected">{{ props.label }}</veui-radio>
      </template>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тєЁУЂћТаит╝Ј№╝џ</h2>
    <veui-select v-model="hero" multiple>
      <veui-option value="a" label="a"/>
      <veui-option value="a1" label="a1"/>
      <veui-option value="a2" label="a2"/>
      <veui-option value="a3" label="a3"/>
      <veui-option value="a4" label="a4"/>
      <veui-option value="a5" label="a5"/>
      <veui-option value="a6" label="a6"/>
      <veui-option value="a7" label="a7"/>
      <veui-option value="a8" label="a8"/>
      <veui-option value="a9" label="a9"/>
      <veui-option value="a10" label="a10"/>
      <veui-option value="a11" label="a11"/>
      <veui-option value="a12" label="a12"/>
      <veui-option value="a13" label="a13"/>
      <veui-option-group position="popup">
        <template #label>СИГтЏй ­ЪЄе­ЪЄ│</template>
        <veui-option-group label="С║њУЂћуйЉ" position="popup">
          <veui-option value="baidu" label="уЎЙт║д"/>
          <veui-option value="alibaba" label="жў┐жЄїти┤ти┤"/>
          <veui-option value="tencent" label="УЁЙУ«»" disabled/>
        </veui-option-group>
        <veui-option-group label="жђџС┐А" position="popup">
          <veui-option value="telecom" label="СИГтЏйућхС┐А"/>
          <veui-option value="mobile" label="СИГтЏйуД╗тіе"/>
        </veui-option-group>
      </veui-option-group>
      <veui-option-group label="уЙјтЏй" position="popup">
        <veui-option-group label="С║њУЂћуйЉ" position="popup">
          <veui-option value="google" label="Google"/>
          <veui-option value="facebook" label="Facebook"/>
          <veui-option value="twitter" label="Twitter"/>
        </veui-option-group>
        <veui-option-group label="жђџС┐А" position="popup">
          <veui-option value="atnt" label="AT&T"/>
          <veui-option value="verizon" label="Verizon"/>
        </veui-option-group>
      </veui-option-group>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тєЁУЂћТаит╝Ј 2№╝џ</h2>
    <veui-select v-model="phone">
      <veui-option-group label="тЏйС║Д">
        <veui-option value="xiaomi" label="т░Ју▒│"/>
        <veui-option value="oppo" label="OPPO"/>
        <veui-option value="vivo" label="vivo"/>
        <veui-option value="smartisan" label="тЮџТъю"/>
      </veui-option-group>
      <veui-option-group label="жЮътЏйС║Д" position="popup">
        <veui-option-group label="уЙјтЏй" position="popup">
          <veui-option value="apple" label="Apple"/>
          <veui-option value="google" label="Google"/>
        </veui-option-group>
        <veui-option-group label="ТЌЦТюг" position="popup">
          <veui-option value="sharp" label="тцЈТЎ«"/>
          <veui-option value="sony" label="у┤бт░╝"/>
        </veui-option-group>
        <veui-option-group label="жЪЕтЏй" position="popup">
          <veui-option value="samsung" label="СИЅТўЪ"/>
          <veui-option value="lg" label="LG"/>
        </veui-option-group>
      </veui-option-group>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тіеТђЂтєЁУЂћТаит╝Ј№╝џ</h2>
    <section>
      <veui-select searchable @input="keyword = $event">
        <template v-if="keyword">
          <veui-option
            v-for="option in result"
            :key="option.value"
            :value="option.value"
            :label="option.label"
          />
        </template>
      </veui-select>
      <veui-button>OK</veui-button>
    </section>
  </section>
  <section>
    <h2>тцЇТЮѓУЄфт«џС╣ЅТаит╝Ј№╝џ</h2>
    <section>
      <veui-select
        v-model="complex"
        multiple
        clearable
        searchable
        :options="complexResult"
        :overlay-style="{
          '--dls-dropdown-max-display-items': 6,
          '--dls-dropdown-max-width': '200px'
        }"
        @input="handleSearch"
      >
        <template v-if="complexResult">
          <veui-option
            v-for="o in complexResult"
            :key="o.value"
            :label="o.label"
            :value="o.value"
          />
        </template>
        <template v-else>
          <veui-option-group
            v-for="(group, i) in complexData"
            :key="i"
            :label="group.label"
            position="popup"
          >
            <template v-for="(g, j) in group.options">
              <veui-option-group
                v-if="g.options"
                :key="`g${j}`"
                position="popup"
                :label="g.label"
                :options="g.options"
              />
              <veui-option
                v-else
                :key="`i${j}`"
                :label="g.label"
                :value="g.value"
              />
            </template>
            <template v-if="group.label === 'СИџтіАуѓ╣'" #before>
              <div class="note">
                <veui-icon class="icon" name="info-circle"/>
                <div class="text">
                  ТГцтцёС╗ЁТўЙуц║СИџтіАуѓ╣ Top n№╝їТѓетЈ»жђџУ┐ЄТљюу┤бТи╗тіатЁХт«ЃСИџтіАуѓ╣ТаЄуГЙсђѓ
                </div>
              </div>
            </template>
          </veui-option-group>
        </template>
      </veui-select>
      <veui-button>OK</veui-button>
    </section>
    <section>
      <veui-select v-model="complex2" multiple>
        <template v-if="loaded">
          <veui-option-group label="Foo" position="popup">
            <template #before>NOTE Foo</template>
            <veui-option label="Foo1" value="foo1"/>
          </veui-option-group>
        </template>
      </veui-select>
      <veui-button>OK</veui-button>
    </section>
  </section>
  <section style="margin-top: 500px">
    <h2>тЈ»Тљюу┤бтѕєу╗ёТаит╝Ј№╝џ</h2>
    <veui-select
      v-model="defaultValue5"
      v-bind="optGroupAttrs"
      searchable
      multiple
      :overlay-options="{ local: true }"
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>ТўЙуц║ти▓жђЅтЏЙТаЄтѕєу╗ёТаит╝Ј№╝џ</h2>
    <veui-select
      v-model="defaultValue6"
      v-bind="optGroupAttrs"
      ui="checkmark"
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>Slot тѕєу╗ёТаит╝Ј 1№╝џ</h2>
    <veui-select v-model="defaultValue7" v-bind="optGroupAttrs">
      <template #option="props">
        <div class="veui-option-custom">{{ props.label }}</div>
      </template>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>Slot[name=option] тѕєу╗ёТаит╝Ј 2№╝џ</h2>
    <veui-select v-model="defaultValue8" v-bind="optGroupAttrs">
      <template #option="props">
        <span class="option-label-text option-custom-label">
          {{ props.label }}
        </span>
        <veui-icon class="icon" name="gift"/>
      </template>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тѕєжџћу║┐Таит╝Ј№╝џ</h2>
    <veui-select
      v-model="defaultValue9"
      v-bind="optGroupAttrs"
      :options="groupedOpts"
    />
    <veui-button>OK</veui-button>
  </section>
  <section>
    <h2>тєЁУЂћТаит╝Ј 3№╝џ</h2>
    <veui-select v-model="defaultValue10" clearable>
      <template #group-label="{ label }">
        <b>{{ label }}</b>
      </template>
      <veui-option-group label="тГЌТ»Ї">
        <veui-option value="A" label="жђЅжА╣ A"/>
        <veui-option value="B" label="жђЅжА╣ B"/>
        <veui-option value="C" label="жђЅжА╣ C"/>
      </veui-option-group>
      <veui-option-group label="ТЋ░тГЌ">
        <veui-option value="1" label="жђЅжА╣ 1"/>
        <veui-option value="2" label="жђЅжА╣ 2"/>
        <veui-option value="3" label="жђЅжА╣ 3"/>
      </veui-option-group>
    </veui-select>
    <veui-button>OK</veui-button>
  </section>
</article>
</template>

<script>
import bus from '../bus'
import {
  Icon,
  Select,
  Option,
  OptionGroup,
  Radio,
  Field,
  Form,
  Button
} from 'veui'
import type from 'veui/managers/type'
import 'veui-theme-dls-icons/star'
import 'veui-theme-dls-icons/gift'
import 'veui-theme-dls-icons/info-circle'

export default {
  name: 'select-demo',
  components: {
    'veui-select': Select,
    'veui-option': Option,
    'veui-option-group': OptionGroup,
    'veui-radio': Radio,
    'veui-icon': Icon,
    'veui-field': Field,
    'veui-form': Form,
    'veui-button': Button
  },
  data () {
    return {
      filter: ({ label }) => {
        return label.indexOf(this.keyword) !== -1
      },
      keyword: '',
      phone: null,
      hero: ['baidu', 'tencent'],
      disabled: true,
      complex: ['1', '2'],
      complex2: [],
      loaded: false,
      icon: true,
      defaultValue: null,
      defaultMultiValue: null,
      defaultSearchMultiValue: [1, 3],
      defaultValue1: null,
      defaultValue2: 2,
      defaultValue3: null,
      defaultValue4: null,
      defaultValue5: null,
      defaultValue6: null,
      defaultValue7: null,
      defaultValue8: '1-1',
      defaultValue9: null,
      defaultValue10: null,
      sizes: ['xs', 's', 'm', 'l'],
      attrs: {
        name: 'age',
        readonly: false,
        disabled: false,
        clearable: true,
        options: [
          {
            label: 'СИІТІЅжђЅжА╣1',
            value: 1
          },
          {
            label: 'СИІТІЅжђЅжА╣СИІТІЅжђЅжА╣СИІТІЅжђЅжА╣2',
            value: 2
          },
          {
            label: 'СИІТІЅжђЅжА╣3',
            value: 3,
            disabled: true
          },
          {
            label: 'СИІТІЅжђЅжА╣4',
            value: 4
          },
          {
            label: 'СИІТІЅжђЅжА╣5',
            value: 5
          },
          {
            label: 'СИІТІЅжђЅжА╣6',
            value: 6
          },
          {
            label: 'СИІТІЅжђЅжА╣7',
            value: 7
          }
        ]
      },
      optGroupAttrs: {
        name: 'name',
        readonly: false,
        disabled: false,
        clearable: true,
        options: [
          {
            label: 'СИІТІЅжђЅжА╣1',
            position: 'popup',
            options: [
              {
                label: 'тГљжђЅжА╣1',
                value: '1-1'
              },
              {
                label: 'тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣2',
                value: '1-2'
              },
              {
                label: 'тГљжђЅжА╣3',
                value: '1-3'
              }
            ]
          },
          {
            label: 'СИІТІЅжђЅжА╣СИІТІЅжђЅжА╣СИІТІЅжђЅжА╣2',
            options: [
              {
                label: 'тГљжђЅжА╣1',
                value: '2-1'
              },
              {
                label: 'тГљжђЅжА╣2',
                value: '2-2'
              },
              {
                label: 'тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣3',
                value: '2-3'
              }
            ]
          },
          {
            label: 'СИІТІЅжђЅжА╣3',
            options: [
              {
                label: 'тГљжђЅжА╣1',
                value: '3-1'
              },
              {
                label: 'тГљжђЅжА╣2',
                value: '3-2'
              },
              {
                label: 'тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣3',
                value: '3-3'
              }
            ]
          },
          {
            label: 'СИІТІЅжђЅжА╣4',
            options: [
              {
                label: 'тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣тГљжђЅжА╣1',
                value: '4-1'
              },
              {
                label: 'тГљжђЅжА╣2',
                value: '4-2'
              },
              {
                label: 'тГљжђЅжА╣3',
                value: '4-3'
              }
            ]
          }
        ]
      },
      searchResult: null,
      complexData: [
        {
          label: 'тєЁт«╣у▒╗тъІ',
          options: [
            { label: 'жђџуће', value: '1' },
            { label: 'жЌ«уГћ', value: '2' },
            { label: 'тИИУДЂжЌ«жбў', value: '3' }
          ]
        },
        {
          label: 'УАїСИџ',
          options: [
            {
              label: 'тї╗уќЌТюЇтіА',
              options: [{ label: 'A', value: 'a' }]
            },
            {
              label: 'ТЋ┤тйбуЙјт«╣',
              options: [
                { label: 'ТЋ┤тйбуЙјт«╣у╗╝тљѕ', value: '4' },
                { label: 'ТЋ┤тйбС┐«тцЇтцќуДЉ', value: '5' },
                { label: 'С║ћт«ўТЋ┤тйб', value: '6' },
                { label: 'тЙ«ТЋ┤тйб', value: '7' },
                { label: 'тЄЈУѓЦтАЉУ║Ф', value: '8' },
                { label: 'ТцЇтЈЉ', value: '9' },
                { label: 'у║╣У║Ф', value: '10' },
                { label: 'тЈБУЁћуЙјт«╣', value: '11' }
              ]
            },
            {
              label: 'тї╗уќЌтЎеТб░',
              options: [{ label: 'B', value: 'b' }]
            },
            {
              label: 'ТЋЎУѓ▓тЪ╣У«Г',
              options: [{ label: 'C', value: 'c' }]
            },
            {
              label: 'ТІЏтЋєтіауЏЪ',
              options: [{ label: 'D', value: 'd' }]
            },
            {
              label: 'тЋєтіАТюЇтіА',
              options: [{ label: 'E', value: 'e' }]
            },
            {
              label: 'тіътЁгТќЄТЋЎ',
              options: [{ label: 'F', value: 'f' }]
            },
            {
              label: 'уйЉу╗юТюЇтіА',
              options: [{ label: 'G', value: 'g' }]
            }
          ]
        },
        {
          label: 'СИџтіАуѓ╣',
          options: [
            { label: 'тиЦуеІтИѕтЪ╣У«Г', value: '12' },
            { label: 'тцДТЋ░ТЇ«тЪ╣У«ГуЈГ', value: '13' },
            { label: 'тЈїую╝уџ«С║ДтЊЂу▒╗', value: '14' },
            { label: 'тѕєТЋБТю║', value: '15' },
            { label: 'у╝ќуаЂтЎе', value: '16' },
            { label: 'уЏИС║▓СИГС╗І', value: '17' }
          ]
        }
      ]
    }
  },
  computed: {
    result () {
      return [
        { label: 'Foo', value: 'foo' },
        { label: 'Bar', value: 'bar' },
        { label: this.keyword, value: this.keyword }
      ]
    },
    groupedOpts () {
      return type
        .clone(this.optGroupAttrs.options)
        .map((group) => {
          delete group.label
          delete group.position
          return group
        })
        .reduce((acc, cur) => {
          acc.push(cur)
          return acc
        }, [])
    },
    complexResult () {
      return this.searchResult
        ? (this.complex || [])
          .map((v) => ({
            label: v + '**',
            value: v
          }))
          .concat(this.searchResult)
        : null
    }
  },
  mounted () {
    this.$children.forEach((child) => {
      child.$on('click', () => {
        bus.$emit('log', child.$el.getAttribute('ui'))
      })
    })

    this.loaded = true
  },
  methods: {
    change (value) {
      // alert('ТѓежђЅСИГуџёСИІТІЅжђЅжА╣тђ╝Тў»' + value)
    },
    handleSearch (val) {
      if (val) {
        this.searchResult = Array.from({
          length: 5
        }).map((_, i) => ({
          label: `${val}#${i}`,
          value: `${val}#${i}`
        }))
      } else {
        this.searchResult = null
      }
    }
  }
}
</script>

<style lang="less" scoped>
section + section {
  margin-top: 10px;
}

.option-label {
  &-text,
  .icon {
    vertical-align: middle;
  }

  .icon {
    margin-left: 5px;
  }
}

.option-custom {
  position: relative;
  padding-left: 24px;

  &::after {
    content: 'РЮц№ИЈ';
    position: absolute;
    top: 50%;
    left: 0;
    transform: translateY(-50%);
  }

  &-label {
    color: rgb(80, 170, 39);
  }
}

.filter {
  width: calc(100% - 10px);
  margin: 5px;
}

.note {
  margin: 8px;
  font-size: 12px;
  width: 240px;

  .icon {
    float: left;
    margin-top: 3px;
    margin-right: 8px;
    margin-left: 8px;
  }

  .text {
    overflow: hidden;
  }
}

.button {
  margin-left: 8px;
}
</style>
